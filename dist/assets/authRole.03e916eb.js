import{_ as K,z as E,u as O,r as i,J as F,d as s,K as J,o as N,c as P,e as t,w as a,f as o,C as y,k as q,l as m,x as C,D as G,B as V,m as S,s as H}from"./index.084ea813.js";import{c as L,d as M}from"./user.82849de2.js";const Q={class:"app-container"},W=m("h4",{class:"form-header h4"},"\u57FA\u672C\u4FE1\u606F",-1),X=m("h4",{class:"form-header h4"},"\u89D2\u8272\u4FE1\u606F",-1),Y={style:{"text-align":"center","margin-left":"-120px","margin-top":"30px"}},Z=E({name:"AuthRole"}),ee=Object.assign(Z,{setup(te){const b=O(),{proxy:f}=H(),g=i(!0),v=i(0),u=i(1),d=i(10),h=i([]),_=i([]),r=i({nickName:void 0,userName:void 0,userId:void 0});function $(l){f.$refs.roleRef.toggleRowSelection(l)}function B(l){h.value=l.map(e=>e.roleId)}function T(l){return l.roleId}function w(){const l={path:"/system/user"};f.$tab.closeOpenPage(l)}function U(){const l=r.value.userId,e=h.value.join(",");M({userId:l,roleIds:e}).then(c=>{f.$modal.msgSuccess("\u6388\u6743\u6210\u529F"),w()})}return(()=>{const l=b.params&&b.params.userId;l&&(g.value=!0,L(l).then(e=>{r.value=e.user,_.value=e.roles,v.value=_.value.length,F(()=>{_.value.forEach(c=>{c.flag&&f.$refs.roleRef.toggleRowSelection(c)})}),g.value=!1}))})(),(l,e)=>{const c=s("el-input"),R=s("el-form-item"),k=s("el-col"),D=s("el-row"),x=s("el-form"),p=s("el-table-column"),j=s("el-table"),z=s("pagination"),I=s("el-button"),A=J("loading");return N(),P("div",Q,[W,t(x,{model:o(r),"label-width":"80px"},{default:a(()=>[t(D,null,{default:a(()=>[t(k,{span:8,offset:2},{default:a(()=>[t(R,{label:"\u7528\u6237\u6635\u79F0",prop:"nickName"},{default:a(()=>[t(c,{modelValue:o(r).nickName,"onUpdate:modelValue":e[0]||(e[0]=n=>o(r).nickName=n),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),t(k,{span:8,offset:2},{default:a(()=>[t(R,{label:"\u767B\u5F55\u8D26\u53F7",prop:"userName"},{default:a(()=>[t(c,{modelValue:o(r).userName,"onUpdate:modelValue":e[1]||(e[1]=n=>o(r).userName=n),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),X,y((N(),q(j,{"row-key":T,onRowClick:$,ref:"roleRef",onSelectionChange:B,data:o(_).slice((o(u)-1)*o(d),o(u)*o(d))},{default:a(()=>[t(p,{label:"\u5E8F\u53F7",width:"55",type:"index",align:"center"},{default:a(n=>[m("span",null,C((o(u)-1)*o(d)+n.$index+1),1)]),_:1}),t(p,{type:"selection","reserve-selection":!0,width:"55"}),t(p,{label:"\u89D2\u8272\u7F16\u53F7",align:"center",prop:"roleId"}),t(p,{label:"\u89D2\u8272\u540D\u79F0",align:"center",prop:"roleName"}),t(p,{label:"\u6743\u9650\u5B57\u7B26",align:"center",prop:"roleKey"}),t(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:a(n=>[m("span",null,C(l.parseTime(n.row.createTime)),1)]),_:1})]),_:1},8,["data"])),[[A,o(g)]]),y(t(z,{total:o(v),page:o(u),"onUpdate:page":e[2]||(e[2]=n=>V(u)?u.value=n:null),limit:o(d),"onUpdate:limit":e[3]||(e[3]=n=>V(d)?d.value=n:null)},null,8,["total","page","limit"]),[[G,o(v)>0]]),t(x,{"label-width":"100px"},{default:a(()=>[m("div",Y,[t(I,{type:"primary",onClick:e[4]||(e[4]=n=>U())},{default:a(()=>[S("\u63D0\u4EA4")]),_:1}),t(I,{onClick:e[5]||(e[5]=n=>w())},{default:a(()=>[S("\u8FD4\u56DE")]),_:1})])]),_:1})])}}}),ne=K(ee,[["__file","/Users/dongzai1005/ws/web-ui/src/views/system/user/authRole.vue"]]);export{ne as default};
